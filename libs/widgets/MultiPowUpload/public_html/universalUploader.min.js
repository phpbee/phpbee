universalUploader={FILE_READY:0,FILE_UPLOADING:1,FILE_COMPLETE:2,FILE_STOPPED:3,FILE_ERROR:4,uploaders:[],options:{uploaders:"html5, flash, html4",showAlertOnError:true,imagesPath:"images/",statusIcons:{0:"file_ready.png",1:"file_progress.gif",2:"file_complete.png",3:"file_ready.png",4:"file_error.png"},icons:{add:"add.png",upload:"upload.png",cancel:"cancel.png",clear:"clear.png",remove:"remove.png"},width:"500",height:"250",postFields_file:"Filedata",postFields_fileId:"fileId",postFields_fileSize:"fileSize",postFields_filesCount:"filesCount"},translation:{constant_notAvailable:"N/A",constant_bytes:"B",constant_kiloBytes:"KB",constant_megaBytes:"MB",constant_gigaBytes:"GB",constant_decimalSeparator:".",tabheader_classic:"Classic","tabheader_drag-and-drop":"Drag and Drop",tabheader_flash:"Flash",tabheader_silverlight:"Silverlight",button_browse:"Browse",button_upload:"Upload",button_cancel:"Cancel",button_clear:"Clear",messages_filesCountExceeded:"Only {51} files are allowed to upload! {50} files were ignored!",messages_fileSizeExceeded:"Only files less than {51} are allowed! {50} files were ignored!",messages_totalFileSizeExceeded:"Total size of the files should be less than {51}. {50} files were ignored!",messages_wrongFileType:"Only files with following type: {51} allowed to upload! {50} files were ignored!",messages_disabledType:"File with following types : {51} are not allowed to upload! {50} files were ignored!",status_ready:"Count of files: {1} ({2})",status_uploading:"Total: {0}% ({3}/{1}) {4}/{2} ({5}/sec, time left: {6}:{7}:{8})",status_complete:"Upload complete! {3} files ({4}/{2}), Elapsed time: {9}:{10}:{11}",status_error:"Error: {12}"},activeTab:"",readyBound:false,filteredImages:[],init:function(b){var a=this;this.files=[];if(!b.handlers){b.handlers={}}this.tabChange=function(c){var f=c.srcElement?c.srcElement.id:this.id;var d=f.substr(0,f.indexOf("_header"));if(a.activeTab!=d){universalUploader.setSelectedTab(a.activeTab,false);universalUploader.setSelectedTab(d,true);a.activeTab=d;a.files=a.uploaders[a.activeTab].getFiles();a.uploaders[a.activeTab].afterRender();a.getProgressInfo().reset();a.drawList_Refresh(a.activeTab);a.updateStatus()}};this.applyGrayFilter=function(g,j,o){if(a.filteredImages[j]){return a.filteredImages[j]}if(g){try{var d=document.createElement("canvas");var k=d.getContext("2d");var n=g.width;var f=g.height;d.width=n;d.height=f;k.drawImage(g,0,0);var c=k.getImageData(0,0,n,f);for(var p=0;p<c.height;p++){for(var q=0;q<c.width;q++){var h=(p*4)*c.width+q*4;var l=(c.data[h]+c.data[h+1]+c.data[h+2])/3;c.data[h]=l;c.data[h+1]=l;c.data[h+2]=l}}k.putImageData(c,0,0,0,0,c.width,c.height);if(!a.filteredImages[j]){a.filteredImages[j]=d.toDataURL()}return d.toDataURL()}catch(m){return o}}return o};this.getCurrentState=function(c){return a.uploaders[c?c:a.activeTab].currentState};this.setCurrentState=function(c,d){a.uploaders[c?c:a.activeTab].currentState=d};this.uploadButtonHandler=function(){if(a.getCurrentState()==a.FILE_UPLOADING){a.stop()}else{a.upload()}};this.upload=function(){if(a.options.formName){var d=a.getFormFields(a.options.formName),c=0;for(c=0;c<d.length;c++){if(d[c][0]){a.options.postFields[d[c][0]]=d[c][1]}}}a.uploaders[a.activeTab].upload()};this.startUpload=function(){if(a.getCurrentState()!=a.FILE_UPLOADING){a.upload()}};this.cancelUpload=function(){a.stop()};this.removeAll=function(){a.clearList()};this.stop=function(){a.uploaders[a.activeTab].stop()};this.getProgressInfo=function(c){return a.uploaders[(c==undefined?a.activeTab:c)].progressInfo};this.clearList=function(){var d=0;var c=document.getElementById("clearButton_"+a.activeTab);if(!c||(c&&c.className.indexOf("uuButtonDisabled")<0)){if(a.getCurrentState()==a.FILE_UPLOADING){a.stop()}a.uploaders[a.activeTab].clearList()}};this.removeFile=function(c,d){if(a.getCurrentState()!=a.FILE_UPLOADING){a.uploaders[a.activeTab].removeFile(c,d);a.removeListItem(c)}};this.removeListItem=function(d){var c=document.getElementById(d+"_listItem");if(c){c.parentNode.removeChild(c)}};this.getFiles=function(c){return a.uploaders[c!=undefined?c:a.activeTab].getFiles()};this.getFilesCount=function(c){return a.getFiles(c).length};this.getFile=function(){return a.getFiles(arguments[1])[arguments[0]]};this.removeFileItem=function(d){var c=this.id.substr(0,this.id.indexOf("_remove"));a.removeFile(c)};this.render=function(e){if(!a.isReady||e==true){universalUploader.isReady=true;var d=document.body;if(a.options.holder){d=document.getElementById(a.options.holder)}tabContainer=document.createElement("dl");tabContainer.className="tabs";tabContainer.id="tabs_container";d.appendChild(tabContainer);var c=0;if(a.uploaders){for(key in a.uploaders){if(a.uploaders.hasOwnProperty(key)&&typeof a.uploaders[key]!="function"){a.addTabTo(tabContainer,a.uploaders[key],c==0);c++}}}if(c>0){a.updateStatus();if(!e){a.callEventHandel("Init",true)}}else{a.callEventHandel("Init",false)}}};this.addTabTo=function(d,f,e){if(e){a.activeTab=f.type}tabHeader=document.createElement("dt");tabHeader.id=f.type+"_header";tabHeader.innerHTML=this.getTranslatedString("tabheader_"+f.type);tabHeader.className=e?"selected":"";a.addEventListener("click",tabHeader,this.tabChange);d.appendChild(tabHeader);tabContents=document.createElement("div");tabContents.id=f.type+"_content";tabContents.className="tab-content";if(a.options.width){tabContents.style.width=(a.options.width-22)+"px"}if(a.options.height){tabContents.style.height=(a.options.height-52)+"px"}var c=f.render();if(!f.isProgressVisible||(f.isProgressVisible&&f.isProgressVisible())){c+='<div id="'+f.type+'_statusPanel" class="uuStatusContainer"><div id="'+f.type+'_statusLabel" class="uuStatusLabel">Here goes status info</div><div id="'+f.type+'_progressBar" class="uuProgressBar"><div id="'+f.type+'_progressBarBody" class="uuProgressBarBody"></div></div></div>'}tabContents.innerHTML=c;tabBody=document.createElement("dd");tabBody.id=f.type+"_body";tabBody.className=e?"selected":"";tabBody.appendChild(tabContents);d.appendChild(tabBody);if(a.options.width){d.style.width=a.options.width+"px"}if(a.options.height){d.style.height=a.options.height+"px"}if(e){f.afterRender()}a.drawList_InitialDraw(f.type)};this.getWidth=function(c){return parseInt(a.options.width)};this.getHeight=function(c){return parseInt(a.options.height)};this.setWidth=function(c){a.setSize(c,a.options.height)};this.setHeight=function(c){a.setSize(a.options.width,c)};this.setSize=function(e,d,g){holder=document.getElementById("tabs_container");a.options.width=e;a.options.height=d;if(a.options.width){holder.style.width=a.options.width+"px"}if(a.options.height){holder.style.height=a.options.height+"px"}if(a.uploaders){for(key in a.uploaders){if(a.uploaders.hasOwnProperty(key)&&typeof a.uploaders[key]!="function"){var h=document.getElementById(a.uploaders[key].type+"_content");var c=document.getElementById(a.uploaders[key].type+"_listItemsHolder"),f=document.getElementById(a.uploaders[key].type+"_fileList");if(a.options.width){h.style.width=(a.options.width-22>0?a.options.width-22:1)+"px"}if(a.options.height){h.style.height=(a.options.height-52>0?a.options.height-52:1)+"px";f.style.height=Number(a.options.height-115>0?a.options.height-115:1)+"px";c.style.height=f.style.height}if(g){a.drawList_Redraw(a.uploaders[key].type)}}}}};this.addAllUploaders=function(){a.addUploader(universalUploader.Html4);a.addUploader(universalUploader.Html5);a.addUploader(universalUploader.Flash);a.addUploader(universalUploader.Silverlight)};this.addUploader=function(c){if(c&&c.available){a.uploaders[c.type]=c}};this.getTranslatedString=function(c){return a.translation[c]};this.getFileStat=function(){var c=[a.files.length,0,0,0];for(i=0;i<a.files.length;i++){c[1]+=a.files[i].size>0?a.files[i].size:0;if(a.files[i].status==a.FILE_COMPLETE){c[2]++;c[3]+=a.files[i].size>0?a.files[i].size:0}}return c};this.bindEventListener=function(c,d){if(a.options){a.options.handlers[c]=d}};this.unbindEventListener=function(c){if(a.options&&a.options.handlers[c]){a.options.handlers[c]=null;delete a.options.handlers[c]}};this.callEventHandel=function(c){if(a.options&&a.options.handlers[c]&&typeof a.options.handlers[c]=="function"){var f=[];for(var d=1;d<arguments.length;d++){f.push(arguments[d])}try{return a.options.handlers[c].apply(this,f)}catch(g){alert(g)}return null}};this.onAddFiles=function(c,d){if(a.getCurrentState(c)!=a.FILE_UPLOADING){a.setCurrentState(c,a.FILE_READY)}a.files=a.getFiles(a.activeTab);if(c==a.activeTab){for(i=0;i<d.length;i++){a.drawList_AddFile(d[i])}}if(a.getCurrentState(c)!=a.FILE_UPLOADING){a.getProgressInfo(c).reset()}else{a.getProgressInfo(c).resetStat()}if(c==a.activeTab){a.updateStatus()}a.callEventHandel("FilesAdded",c,d)};this.onRemoveFile=function(e,c,f){a.removeListItem(c);a.setCurrentState(e,a.FILE_READY);var d=a.getFile(c,e);if(d){a.getProgressInfo(e).totalFiles--;if(d.size>0){a.getProgressInfo(e).totalSize-=d.size}if(d.status==universalUploader.FILE_COMPLETE){a.getProgressInfo(e).uploadedFiles--;if(d.size>0){a.getProgressInfo(e).uploadedSize-=d.size}}}if(e==a.activeTab){a.updateStatus()}if(!f){a.callEventHandel("FilesRemoved",e,[d])}};this.onClearList=function(c){var d=a.getFiles(c);if(d.length>0){a.callEventHandel("FilesRemoved",c,d)}};this.onError=function(c,d){if(a.options.showAlertOnError){a.showAlert(d)}a.getProgressInfo(c).lastError=d;a.callEventHandel("Error",c,d)};this.onUploadStart=function(c){a.setCurrentState(c,a.FILE_UPLOADING);a.getProgressInfo(c).reset();if(c==a.activeTab){a.updateStatus()}a.drawList_Refresh(c);a.callEventHandel("UploadStart",c)};this.onUploadComplete=function(c){a.setCurrentState(c,a.FILE_COMPLETE);if(c==a.activeTab){a.updateStatus()}a.drawList_Refresh(c);a.callEventHandel("UploadComplete",c);if(a.options.redirectUrl){window.location=a.options.redirectUrl}};this.onUploadStop=function(c){a.getProgressInfo(c).stopTime=new Date();if(a.getCurrentState(c)!=a.FILE_ERROR){a.setCurrentState(c,a.FILE_READY);if(c==a.activeTab){a.updateStatus()}}a.drawList_Refresh(c);a.callEventHandel("UploadStop",c)};this.onFileUploadStart=function(e,c){a.setCurrentState(e,a.FILE_UPLOADING);var d=a.getFile(c,e);a.getProgressInfo(e).lastBytes=0;if(d){d.status=universalUploader.FILE_UPLOADING;d.bytesLoaded=0;d.error="";a.drawList_RedrawFile(e,d)}if(e==a.activeTab){a.updateStatus()}a.callEventHandel("FileUploadStart",e,d)};this.onFileUploadProgress=function(f,c,d){if(a.getCurrentState(f)!=a.FILE_STOPPED){a.setCurrentState(f,a.FILE_UPLOADING)}var e=a.getFile(c,f);if(e){e.bytesLoaded=d;a.drawList_RedrawFile(f,e)}a.getProgressInfo(f).onProgress(d);if(f==a.activeTab){a.updateStatus()}a.callEventHandel("UploadProgress",f,e,a.getProgressInfo(f))};this.onFileUploadError=function(f,d,c,g){a.setCurrentState(f,a.FILE_ERROR);var e=a.getFile(d,f);if(e){e.status=universalUploader.FILE_ERROR;e.bytesLoaded=0;e.error=c+". "+g+".";a.drawList_RedrawFile(f,e)}a.getProgressInfo(f).lastError=g;if(f==a.activeTab){a.updateStatus()}a.callEventHandel("FileUploadError",f,e,c,g)};this.onFileUploadStop=function(e,c){var d=a.getFile(c,e);if(d){if(a.getCurrentState(e)!=universalUploader.FILE_ERROR){d.status=universalUploader.FILE_STOPPED}d.bytesLoaded=0;d.error="";a.drawList_RedrawFile(e,d)}a.onUploadStop(e);a.callEventHandel("FileUploadStop",e,d)};this.onFileUploadComplete=function(f,c,d){var e=a.getFile(c,f);a.getProgressInfo(f).uploadedFiles++;if(e){e.serverResponse=d;if(a.getCurrentState(f)!=universalUploader.FILE_ERROR){e.status=universalUploader.FILE_COMPLETE}e.bytesLoaded=e.size;e.error="";a.onFileUploadProgress(f,c,e.size)}if(f==a.activeTab){a.updateStatus()}a.callEventHandel("FileUploadComplete",f,e,d)};this.getFileStateIcon=function(c){return a.options.imagesPath+a.options.statusIcons[c]};this.getIcon=function(c){return a.options.imagesPath+a.options.icons[c]};this.drawList_InitialDraw=function(d){if(d){var e=document.getElementById(d+"_fileList");if(e){e.innerHtml="";var c=document.createElement("ul");c.id=d+"_listItemsHolder";c.className="listItemsHolder";e.style.height=(a.options.height-115)+"px";c.style.height=e.style.height;e.appendChild(c)}}};this.drawList_Redraw=function(c){if(!c){c=a.activeTab}if(c){var e=document.getElementById(c+"_listItemsHolder");if(e){e.innerHtml="";while(e.hasChildNodes()){e.removeChild(e.lastChild)}var d=a.getFiles(c);for(i=0;i<d.length;i++){a.drawList_AddFile(d[i])}}}};this.setButtonsStates=function(e){var c=!(a.getCurrentState(e)==a.FILE_UPLOADING);a.setButtonState(e,"clearButton_","clear",c);var d=document.getElementById("uploadButton_"+a.activeTab);if(d){if(c){d.innerHTML='<span><span><img src="'+universalUploader.getIcon("upload")+'"/>'+a.getTranslatedString("button_upload")+"</span></span>"}else{d.innerHTML='<span><span><img src="'+universalUploader.getIcon("cancel")+'"/>'+a.getTranslatedString("button_cancel")+"</span></span>"}}};this.setButtonState=function(c,f,e,d){if(d){a.setButtonEnabled(c,f,e)}else{a.setButtonDisabled(c,f,e)}};this.setButtonEnabled=function(f,h,g){var d=document.getElementById(h+f);if(d&&d.className.indexOf("uuButtonDisabled")>=0){a.removeClass(d,"uuButtonDisabled");var c=d.getElementsByTagName("img");for(var e=0;c[e];e++){c[e].src=universalUploader.getIcon(g)}}};this.setButtonDisabled=function(f,h,g){var d=document.getElementById(h+f);if(d&&d.className.indexOf("uuButtonDisabled")<0){a.addClass(d,"uuButtonDisabled");var c=d.getElementsByTagName("img");for(var e=0;c[e];e++){c[e].src=universalUploader.applyGrayFilter(c[e],h,universalUploader.getIcon(g))}}};this.drawList_Refresh=function(c){if(!c){c=a.activeTab}if(c){a.setButtonsStates(c);var e=document.getElementById(c+"_listItemsHolder");if(e){var d=a.getFiles(c);for(i=0;i<d.length;i++){a.drawList_RedrawFile(c,d[i])}}}};this.drawList_AddFile=function(d){if(a.activeTab){var k=document.getElementById(a.activeTab+"_listItemsHolder");if(k){var c=k.offsetWidth;var m=document.createElement("li");m.id=d.id+"_listItem";m.className="listItem";var h=document.createElement("div");h.id=d.id+"_fileState";h.className="fileState";h.innerHTML='<img src="'+a.getFileStateIcon(d.status)+'">';m.appendChild(h);var f=document.createElement("div");f.id=d.id+"_fileName";f.className="fileName";f.style.width=(c-152)+"px";f.innerHTML="<span>"+d.name+"</span>";m.appendChild(f);var g=document.createElement("div");g.id=d.id+"_fileRemove";g.className="fileRemove";if(d.status==a.FILE_UPLOADING||a.getCurrentState()==a.FILE_UPLOADING){g.innerHTML='<img id="_rmIcon" title="Remove file" src="'+universalUploader.applyGrayFilter(document.getElementById("_rmIcon"),"rmIcon",universalUploader.getIcon("remove"))+'" >'}else{g.innerHTML='<img id="_rmIcon" title="Remove file" src="'+universalUploader.getIcon("remove")+'" onClick="javascript: universalUploader.removeFile(\''+d.id+"')\">"}m.appendChild(g);var e=document.createElement("div");e.id=d.id+"_fileSize";e.className="fileSize";e.innerHTML=a.formatBytes(d.size);m.appendChild(e);var j=document.createElement("div");j.id=d.id+"_fileStatus";j.className="fileStatus";j.innerHTML=d.getPercent()+"%";m.appendChild(j);var l=document.createElement("div");l.id=d.id+"_fileSpacer";l.className="fileSpacer";l.innerHTML="&nbsp;";m.appendChild(l);k.appendChild(m)}}};this.drawList_RedrawFile=function(g,f){if(g==a.activeTab){var h=document.getElementById(a.activeTab+"_listItemsHolder");var k=document.getElementById(f.id+"_listItem");if(h&&k&&k.offsetTop>k.offsetHeight){h.scrollTop=k.offsetTop-k.offsetHeight}var d=document.getElementById(f.id+"_fileStatus");if(d){d.innerHTML=f.getPercent()+"%"}var e=document.getElementById(f.id+"_fileState");var c='<img src="'+a.getFileStateIcon(f.status)+'">';if(e&&e.innerHTML!=c){e.innerHTML=c}var j=document.getElementById(f.id+"_fileRemove");if(j){if(f.status==a.FILE_UPLOADING||a.getCurrentState()==a.FILE_UPLOADING){j.innerHTML='<img id="_rmIcon" title="Remove file" src="'+universalUploader.applyGrayFilter(document.getElementById("_rmIcon"),"rmIcon",universalUploader.getIcon("remove"))+'" >'}else{j.innerHTML='<img id="_rmIcon" title="Remove file" src="'+universalUploader.getIcon("remove")+'" onClick="javascript: universalUploader.removeFile(\''+f.id+"')\">"}}}};this.updateStatus=function(){var d=document.getElementById(a.activeTab+"_progressBarBody");if(d){d.style.width=a.getProgressInfo().getTotalPercent()+"%"}var c=document.getElementById(a.activeTab+"_statusLabel");if(c){switch(a.getCurrentState()){case a.FILE_READY:c.innerHTML=a.getProgressInfo().replacePlaceHolders(a.getTranslatedString("status_ready"));break;case a.FILE_UPLOADING:c.innerHTML=a.getProgressInfo().replacePlaceHolders(a.getTranslatedString("status_uploading"));break;case a.FILE_COMPLETE:c.innerHTML=a.getProgressInfo().replacePlaceHolders(a.getTranslatedString("status_complete"));break;case a.FILE_ERROR:c.innerHTML=a.getProgressInfo().replacePlaceHolders(a.getTranslatedString("status_error"));break}}};this.positionFormUnderButton=function(m,f,l){if(m&&f){f.style.position="absolute";f.style.width=m.offsetWidth+"px";f.style.height=m.offsetHeight+"px";f.style.overflowX="hidden";f.style.overflowY="hidden";var c=m.offsetTop;var d=m.offsetLeft;f.style.top=c+"px";f.style.left=d+"px"}if(l){var k=function(n){l.click();try{if(n.preventDefault){n.preventDefault()}if(n.stopPropagation){n.stopPropagation()}if(window.event){window.event.returnValue=false}if(n.stopEvent){n.stopEvent()}}catch(o){}};var g=function(n){universalUploader.addClass(m,"uuButtonHover")},e=function(n){universalUploader.removeClass(m,"uuButtonHover")},j=function(n){universalUploader.addClass(m,"uuButtonActive")},h=function(n){universalUploader.removeClass(m,"uuButtonActive")};universalUploader.removeEventListener("click",m,k);universalUploader.addEventListener("click",m,k);universalUploader.removeEventListener("mouseover",l,g);universalUploader.addEventListener("mouseover",l,g);universalUploader.removeEventListener("mouseout",l,e);universalUploader.addEventListener("mouseout",l,e);universalUploader.removeEventListener("mousedown",l,j);universalUploader.addEventListener("mousedown",l,j);universalUploader.removeEventListener("mouseup",l,h);universalUploader.addEventListener("mouseup",l,h)}};this.formatBytes=function(d,e){var f=a.getTranslatedString("constant_decimalSeparator");f=f?f:".";var c=e==true?1:0;if(d<0){return a.getTranslatedString("constant_notAvailable")}if(d<1024){return a.formatNumber(d,c,f)+" "+a.getTranslatedString("constant_bytes")}if(d>=1024&&d/1024<1024){return a.formatNumber(d/1024,c,f)+" "+a.getTranslatedString("constant_kiloBytes")}if(d/1024>=1024&&d/1024/1024<1024){return a.formatNumber(d/1024/1024,c,f)+" "+a.getTranslatedString("constant_megaBytes")}if(d/1024/1024>=1024){return a.formatNumber(d/1024/1024/1024,c,f)+" "+a.getTranslatedString("constant_gigaBytes")}return d+" "+a.getTranslatedString("constant_bytes")};this.isExtensionInArray=function(f,e){var d=0,c="";d=f.lastIndexOf(".");if(d>=0){c=f.substring(d+1).toLowerCase();if(e.indexOf(c)>=0||e==undefined||e.length==0){return true}return false}return false};this.isValidFile=function(f,d,c){try{if(a.options.fileFilter_maxSize!=-1&&f.size>a.options.fileFilter_maxSize){return 4}else{if(a.options.fileFilter_maxTotalSize!=-1&&(a.getProgressInfo().totalSize+c+f.size)>a.options.fileFilter_maxTotalSize){return 7}else{if(a.options.fileFilter_types&&!a.isExtensionInArray(f.name,a.options.fileFilter_types.split(","))){return 8}else{if(a.options.fileFilter_minSize!=-1&&f.size<a.options.fileFilter_minSize){return 9}else{if(a.options.fileFilter_disabledTypes&&a.isExtensionInArray(f.name,a.options.fileFilter_disabledTypes.split(","))){return 10}else{if(a.options.fileFilter_maxCount!=-1&&(a.files.length+d.length+1)>a.options.fileFilter_maxCount){return 2}}}}}}}catch(g){return -1}return -1};this.displayResultOfAdd=function(d){var c=0;for(c=2;c<d.length;c++){if(d[c]>0){switch(c){case 2:a.onError(a.activeTab,a.replaceMessagesPlaceHolders(a.getTranslatedString("messages_filesCountExceeded"),a.options.fileFilter_maxCount,d[c]));break;case 4:a.onError(a.activeTab,a.replaceMessagesPlaceHolders(a.getTranslatedString("messages_fileSizeExceeded"),a.formatBytes(a.options.fileFilter_maxSize),d[c]));break;case 7:a.onError(a.activeTab,a.replaceMessagesPlaceHolders(a.getTranslatedString("messages_totalFileSizeExceeded"),a.formatBytes(a.options.fileFilter_maxTotalSize),d[c]));break;case 8:a.onError(a.activeTab,a.replaceMessagesPlaceHolders(a.getTranslatedString("messages_wrongFileType"),a.options.fileFilter_types,d[c]));break;case 9:a.onError(a.activeTab,a.replaceMessagesPlaceHolders(a.getTranslatedString("messages_fileSizeNotEnough"),a.formatBytes(a.options.fileFilter_maxSize),d[c]));break;case 10:a.onError(a.activeTab,a.replaceMessagesPlaceHolders(a.getTranslatedString("messages_disabledType"),a.options.fileFilter_disabledTypes,d[c]));break}}}};this.replaceMessagesPlaceHolders=function(e,f,d){var c=e.replace(/\{50\}/g,d);c=c.replace(/\{51\}/g,f);return c};this.showAlert=function(c){alert(c)};for(key in b){if(b.hasOwnProperty(key)){this.options[key]=b[key]}}this.options.url=this.getAbsoluteUrl(this.options.url);this.addAllUploaders();if(this.options.uploaders){upls=this.options.uploaders.toLowerCase().trim();upls=this.options.uploaders.toLowerCase().split(",");tempArr=[];for(i=0;i<upls.length;i++){if(this.uploaders[upls[i].trim()]){upl=this.uploaders[upls[i].trim()];upl.init(this.options);if(upl.available){tempArr[upl.type]=upl;if(this.options.singleUploader){break}}}}this.uploaders=tempArr}this.bindReady()},setSelectedTab:function(b,a){try{tabHeader=document.getElementById(b+"_header");tabHeader.className=a?"selected":"";tabBody=document.getElementById(b+"_body");tabBody.className=a?"selected":""}catch(c){alert(c)}},addEventListener:function(b,c,a){if(document.addEventListener){c.addEventListener(b,a,false)}else{if(document.attachEvent){c.attachEvent("on"+b,a)}}},removeEventListener:function(b,c,a){if(c){if(c.removeEventListener){c.removeEventListener(b,a,false)}}if(c.detachEvent){c.detachEvent("on"+b,a)}},fireEvent:function(b,c){if(b.fireEvent){b.fireEvent("on"+c)}else{var a=document.createEvent("Events");a.initEvent(c,true,false);b.dispatchEvent(a)}},addClass:function(b,c){if(!b.className){b.className=c}else{var a=" "+b.className+" ",d=b.className;if(a.indexOf(" "+c+" ")<0){d+=" "+c}b.className=d.trim()}},removeClass:function(b,c){if(b.className){if(c){var a=(" "+b.className+" ").replace(" "+c+" "," ");b.className=a.trim()}else{b.className=""}}},bindReady:function(){if(this.readyBound){return}this.readyBound=true;if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,false);universalUploader.render()},false)}else{if(document.attachEvent){document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",arguments.callee);universalUploader.render()}});if(document.documentElement.doScroll&&window==window.top){(function(){if(universalUploader.isReady){return}try{document.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}universalUploader.render()})()}}}this.addEventListener("load",window,universalUploader.render)},getAbsoluteUrl:function(a){try{var d="",c=-1;if(a.match(/^https?:\/\//i)||a.match(/^\//)||a===""){return a}c=window.location.pathname.lastIndexOf("/");d=(c<=0)?"/":window.location.pathname.substr(0,c)+"/";return d+a}catch(b){return a}},getUid:function(){return((new Date()).getTime()+""+Math.floor(Math.random()*1000000)).substr(0,18)},formatNumber:function(f,c,h,e){f=(f+"").replace(/[^0-9+\-Ee.]/g,"");var b=!isFinite(+f)?0:+f,a=!isFinite(+c)?0:Math.abs(c),k=(typeof e==="undefined")?"":e,d=(typeof h==="undefined")?".":h,j="",g=function(o,m){var l=Math.pow(10,m);return""+Math.round(o*l)/l};j=(a?g(b,a):""+Math.round(b)).split(".");if(j[0].length>3){j[0]=j[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,k)}if((j[1]||"").length<a){j[1]=j[1]||"";j[1]+=new Array(a-j[1].length+1).join("0")}return j.join(d)},getFormFields:function(h){var b=document.getElementById(h),f=new Array(),k=new Array(),a=0,c=false;if(b){for(var g=0;g<b.elements.length;g++){k=new Array();k[0]=b.elements[g].name;c=false;if(b.elements[g].type=="checkbox"||b.elements[g].type=="radio"){if(b.elements[g].checked){k[1]=b.elements[g].value}else{k=null}}else{if(b.elements[g].type=="select-multiple"){var d=b.elements[g];for(var e=0;e<d.length;e++){if(d.options[e].selected){k=new Array();k[0]=b.elements[g].name;k[1]=d.options[e].value;f[a]=k;a++;c=true}}}else{k[1]=b.elements[g].value}}if(!c){f[a]=k;a++}}}return f},applyTranslation:function(a){for(key in a){if(a.hasOwnProperty(key)){this.translation[key]=a[key]}}},initLanguage:function(){var a="en";if(this.options.language_autoDetect){a=(navigator.language)?navigator.language:navigator.userLanguage}else{if(this.options.language_source&&this.options.language_source.indexOf("{0}")>=0){return null}}if(a==undefined){a="en"}else{if(a.length>1){a=a.substr(0,2)}}a=a.toLowerCase();var b=this.options.language_source.replace(/\{0\}/g,a);if(b){this.loadJsFile(b)}return null},loadJsFile:function(a){var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src",a);if(b){document.getElementsByTagName("head")[0].appendChild(b)}},zeroPad:function(d,c){return(d.toString().length>c)?d:("00000000000000000000"+d).slice(-c)},getVersion:function(){return"1.0 RC"}};universalUploader.File=function(c,d,b){var a=this;d=d.replace(/\\/g,"/");if(d.lastIndexOf("/")>0){d=d.substring(d.length,d.lastIndexOf("/")+1)}this.id=c;this.status=0;this.name=d;this.size=!isNaN(b)&&b>0?b:-1;this.bytesLoaded=0;this.serverResponse="";this.getPercent=function(){var e=Math.round((a.bytesLoaded/a.size)*100);return(a.status==2)?100:(e>=100)?99:e}};universalUploader.ProgressInfo=function(){var a=this;a.lastError="";a.totalFiles=0;a.totalSize=0;a.uploadedFiles=0;a.uploadedSize=0;a.startTime=new Date();a.stopTime=new Date();a.lastProgressTime=new Date();a.lastBytes=0;a.bandwidth=0;a.avgBw=[];a.avBwCount=30;a.avBwCurr=0;a.getPercent=function(){return(a.totalSize==0)?0:(a.uploadedSize/a.totalSize)*100};a.reset=function(){a.resetStat();a.resetProgress()};a.resetStat=function(){var b=universalUploader.getFileStat();a.totalFiles=b[0];a.totalSize=b[1];a.uploadedFiles=b[2];a.uploadedSize=b[3]};a.resetProgress=function(){a.startTime=new Date();a.stopTime=new Date();a.lastProgressTime=new Date();a.lastBwStore=new Date();a.lastBytes=0;a.bandwidth=0;a.avgBw=[];a.avBwCurr=0};a.getBandwdth=function(){var b=0;for(i=0;i<a.avgBw.length;i++){b+=a.avgBw[i]}return a.avgBw.length>0?b/a.avgBw.length:universalUploader.getTranslatedString("constant_notAvailable")};a.onProgress=function(e){var b=new Date();a.stopTime=b;var d=b.getTime()-a.lastProgressTime.getTime();var c=e-a.lastBytes;if(c>0){a.uploadedSize+=c;if(d<=0){d=1}a.bandwidth=(c/(d/1000));if(b.getTime()-a.lastBwStore.getTime()>500||a.avgBw.length==0){if(a.avBwCurr<a.avBwCount){a.avgBw.push(a.bandwidth)}else{a.avgBw[a.avBwCur]=a.bandwidth}a.avBwCurr++;a.lastBwStore=b}a.lastProgressTime=b;a.lastBytes=e}};a.getTotalPercent=function(){return a.totalSize>0?Math.round((a.uploadedSize/a.totalSize)*100):a.uploadedFiles>0?Math.round(a.uploadedFiles/a.totalFiles*100):0};a.timeLeft=function(){if(a.bandwidth>0){var b=(a.totalSize-a.uploadedSize)/(a.getBandwdth());return b>0?b:0}return 0};a.timeLeftHour=function(){return Math.floor(a.timeLeft()/60/60)};a.timeLeftMin=function(){return Math.floor(a.timeLeft()/60-Math.floor(a.timeLeftHour())*60)};a.timeLeftSec=function(){return Math.round(a.timeLeft()%60)};a.elapsedTime=function(){return(a.stopTime.getTime()-a.startTime.getTime())/1000};a.elapsedHour=function(){return Math.floor(a.elapsedTime()/60/60)};a.elapsedMin=function(){return Math.floor(a.elapsedTime()/60-Math.floor(a.elapsedHour())*60)};a.elapsedSec=function(){return Math.round(a.elapsedTime()%60)};a.replacePlaceHolders=function(c){var b=c.replace(/\{0\}/g,a.getTotalPercent());b=b.replace(/\{1\}/g,a.totalFiles);b=b.replace(/\{2\}/g,universalUploader.formatBytes(a.totalSize));b=b.replace(/\{3\}/g,a.uploadedFiles);b=b.replace(/\{4\}/g,universalUploader.formatBytes(a.uploadedSize));b=b.replace(/\{5\}/g,universalUploader.formatBytes(a.getBandwdth()));b=b.replace(/\{6\}/g,universalUploader.zeroPad(a.timeLeftHour(),2));b=b.replace(/\{7\}/g,universalUploader.zeroPad(a.timeLeftMin(),2));b=b.replace(/\{8\}/g,universalUploader.zeroPad(a.timeLeftSec(),2));b=b.replace(/\{9\}/g,universalUploader.zeroPad(a.elapsedHour(),2));b=b.replace(/\{10\}/g,universalUploader.zeroPad(a.elapsedMin(),2));b=b.replace(/\{11\}/g,universalUploader.zeroPad(a.elapsedSec(),2));b=b.replace(/\{12\}/g,a.lastError);return b}};universalUploader.Flash={type:"flash",available:true,options:{},params:{},inited:false,detectFlashPlayer:function(){var g=[0,0,0],f=null;if(typeof navigator.plugins!="undefined"&&typeof navigator.plugins["Shockwave Flash"]=="object"){f=navigator.plugins["Shockwave Flash"].description;if(f&&!(typeof navigator.mimeTypes!="undefined"&&navigator.mimeTypes["application/x-shockwave-flash"]&&!navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)){plugin=true;ie=false;f=f.replace(/^.*\s+(\S+\s+\S+$)/,"$1");g[0]=parseInt(f.replace(/^(.*)\..*$/,"$1"),10);g[1]=parseInt(f.replace(/^.*\.(.*)\s.*$/,"$1"),10);g[2]=/[a-zA-Z]/.test(f)?parseInt(f.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof window.ActiveXObject!="undefined"){try{var b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(b){f=b.GetVariable("$version");if(f){ie=true;f=f.split(" ")[1].split(",");g=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)]}}}catch(c){}}}return g[0]},init:function(b){var a=this;a.currentState=universalUploader.FILE_READY;this._files=[];this.progressInfo=new universalUploader.ProgressInfo();this.options.renderFlashUi=b.flash_ownUi;this.options.swfUrl=b.flash_swfUrl?b.flash_swfUrl:"ElementITMultiPowUpload.swf";this.params.serialNumber=b.serialNumber;if(!this.options.renderFlashUi){this.params.hiddenMode=true;this.params.overlayObjectId="browseButton_"+this.type}if(b.postFields){this.params.customPostFields="";for(key in b.postFields){if(b.postFields.hasOwnProperty(key)){this.params.customPostFields+=key+";"+b.postFields[key]+"|"}}}if(b.postFields_file){this.params["postFields.file"]=b.postFields_file}if(b.postFields_fileId){this.params["postFields.fileId"]=b.postFields_fileId}if(b.postFields_fileSize){this.params["postFields.fileSize"]=b.postFields_fileSize}if(b.postFields_filesCount){this.params["postFields.filesCount"]=b.postFields_filesCount}this.params["debug.enabled"]=false;this.params.uploadUrl=encodeURIComponent(b.url);this.params.checkConnectionOnIOError=false;this.params.showIOError=true;this.params.useExternalInterface="true";this.params.javaScriptEventsPrefix="universalUploader.Flash.MultiPowUpload";for(key in b.flash_params){if(b.flash_params.hasOwnProperty(key)){this.params[key]=b.flash_params[key]}}if(this.detectFlashPlayer()<10){this.available=false;return false}this.getFlashVars=function(){var c="";for(key in a.params){if(a.params.hasOwnProperty(key)){c+=key+"="+a.params[key]+"&"}}return c},this.render=function(){var d="";if(!a.options.renderFlashUi){d+='<div id="controlsContainer_'+a.type+'" class="uuControlsContainer"><a class="uuButton uuClearButton" href="#" id="clearButton_'+a.type+'" onclick="javascript: universalUploader.clearList();"><span><span><img src="'+universalUploader.getIcon("clear")+'"/>'+universalUploader.getTranslatedString("button_clear")+'</span></span></a><a id="browseButton_'+a.type+'" class="uuButton" href="#"><span><span><img src="'+universalUploader.getIcon("add")+'"/>'+universalUploader.getTranslatedString("button_browse")+'</span></span></a>&nbsp;<a class="uuButton" href="#" id="uploadButton_'+a.type+'" onclick="javascript: universalUploader.uploadButtonHandler();"><span><span><img src="'+universalUploader.getIcon("upload")+'"/>'+universalUploader.getTranslatedString("button_upload")+"</span></span></a></div>"}var c='<div id="MultiPowUpload_holder"><strong>You need at least 10 version of Flash player!</strong><a href="http://www.adobe.com/go/getflashplayer">&nbsp;Get Adobe Flash player</a></div>	';if(!a.options.renderFlashUi){d+='<div id="'+a.type+'_fileList" class="fileList">'+c+"</div>"}else{d+=c}return d};this.isProgressVisible=function(){return !a.options.renderFlashUi};this.afterRender=function(){if(!a.inited){universalUploader.setButtonState(a.type,"browseButton_","add",false);var k={BGColor:"#FFFFFF",wmode:(a.isProgressVisible()?"transparent":"window")};var f={id:"MultiPowUpload",name:"MultiPowUpload",style:"position: "+(a.isProgressVisible()?"absolute":"relative")+";"};var e={serialNumber:a.params.serialNumber,useExternalInterface:"true",uploadUrl:a.params.url};for(key in a.params){if(a.params.hasOwnProperty(key)){e[key]=a.params[key]}}var j=document.getElementById(a.type+"_content");var h=j.offsetWidth-20,d=j.offsetHeight-20;if(!a.options.renderFlashUi){try{var c=document.getElementById(a.type+"_fileList");if(c){h=c.offsetWidth-3;d-=document.getElementById("controlsContainer_"+a.type).offsetHeight;d-=document.getElementById(a.type+"_statusPanel").offsetHeight}}catch(g){}}swfobject.embedSWF(a.options.swfUrl,"MultiPowUpload_holder",h,d,"10.0.0",null,e,k,f)}};this.upload=function(){if(b.postFields){this.params.customPostFields="";for(key in b.postFields){if(b.postFields.hasOwnProperty(key)){this.params.customPostFields+=key+";"+b.postFields[key]+"|"}}MultiPowUpload.setParameter("customPostFields",this.params.customPostFields)}a.stopped=false;MultiPowUpload.uploadAll()};this.stop=function(){if(!a.stopped){MultiPowUpload.cancelUpload();a.stopped=true}};this.convertFile=function(d){var c=new universalUploader.File(d.id,d.name,d.size);c.status=d.status;c.bytesLoaded=d.percentDone/100*d.size;return c};this.getFiles=function(){return a._files};this.clearList=function(){MultiPowUpload.removeAll()};this.removeFile=function(c){MultiPowUpload.removeFile(c)};this._removeFile=function(c,d){universalUploader.onRemoveFile(a.type,c,d);if(a._files[c]){a._files.splice(a._files.indexOf(a._files[c]),1);a._files[c]=null;delete a._files[c]}};this.MultiPowUpload_onMovieLoad=function(){a.inited=true;universalUploader.setButtonState(a.type,"browseButton_","add",true);universalUploader.positionFormUnderButton(document.getElementById("browseButton_"+a.type),null,MultiPowUpload);for(var c=a._files.length-1;c>=0;c--){a._removeFile(a._files[c].id)}};this.MultiPowUpload_onAddFiles=function(k){var c=[],h=null,g=0,j=[0,0,0,0,0,0,0,0,0,0,0,0],f=-1,e=0;for(var d=0;d<k.length;d++){var h=k[d];if(h.name!=""){h=a.convertFile(k[d]);f=universalUploader.isValidFile(h,c,g);if(f<0){c.push(h);g+=h.size}else{MultiPowUpload.removeFile(h.id);j[f]++;e++}}}if(e>0){universalUploader.displayResultOfAdd(j)}for(var d=0;d<c.length;d++){a._files[c[d].id]=c[d];a._files.push(c[d])}if(c.length>0){universalUploader.onAddFiles(a.type,c)}};this.MultiPowUpload_onRemoveFiles=function(d){for(var c=0;c<d.length;c++){a._removeFile(d[c].id)}};this.MultiPowUpload_onClearList=function(d){universalUploader.onClearList(a.type);for(var c=a._files.length-1;c>=0;c--){a._removeFile(a._files[c].id,true)}};this.MultiPowUpload_onFileStart=function(c){universalUploader.onFileUploadStart(a.type,c.id)};this.MultiPowUpload_onProgress=function(c){universalUploader.onFileUploadProgress(a.type,c.id,MultiPowUpload.getProgressInfo().currentFileUploadedBytes)};this.MultiPowUpload_onCancel=function(){a.stopped=true;universalUploader.onFileUploadStop(a.type,MultiPowUpload.getProgressInfo().currentListItem.id)};this.MultiPowUpload_onError=function(d,c){universalUploader.onFileUploadError(a.type,d.id,"",c);a.MultiPowUpload_onCancel()};this.MultiPowUpload_onErrorMessage=function(c){universalUploader.onError(a.type,c)};this.MultiPowUpload_onStart=function(){universalUploader.onUploadStart(a.type)};this.MultiPowUpload_onComplete=function(){universalUploader.onUploadComplete(a.type)};this.MultiPowUpload_onServerResponse=function(c){universalUploader.onFileUploadComplete(a.type,c.id,c.serverResponse)}}};universalUploader.Silverlight={type:"silverlight",available:true,options:{},params:{},uploadController:null,inited:false,detectSilverlightVersion:function(b){var a;try{try{var f=new ActiveXObject("AgControl.AgControl");if(f.IsVersionSupported(b)){a=Number(b)}else{a=Number(b)-1}}catch(d){var c=navigator.plugins["Silverlight Plug-In"];if(c){if(c.description==="1.0.30226.2"){a=2}else{a=parseInt(c.description[0])}}else{a=0}}}catch(d){a=0}return a},init:function(b){var a=this;a.currentState=universalUploader.FILE_READY;this._files=[];this.options=b;this.progressInfo=new universalUploader.ProgressInfo();this.options.renderOwnUi=b.silverlight_ownUi;this.options.xapUrl=b.silverlight_xapUrl?b.silverlight_xapUrl:"UltimateUploader.xap";this.params.LicenseKey=b.serialNumber;this.params.HandlersObject="universalUploader.Silverlight";this.params.ChunkMultipart=true;if(!this.options.renderOwnUi){this.params.HiddenMode=true}if(b.postFields){this.params.CustomPostFields="";for(key in b.postFields){if(b.postFields.hasOwnProperty(key)){this.params.CustomPostFields+=key+";"+b.postFields[key]+"|"}}}if(b.postFields_file){this.params.PostFieldsFile=b.postFields_file}if(b.postFields_fileId){this.params.PostFieldsFileId=b.postFields_fileId}if(b.postFields_fileSize){this.params.PostFieldsFileSize=b.postFields_fileSize}if(b.postFields_filesCount){this.params.PostFieldsFilesCount=b.postFields_filesCount}this.params.UploadHandler=b.url+(b.url.indexOf("?")>=0?"&":"?")+"chunkedUpload=true";if(this.detectSilverlightVersion("4.0")<4){this.available=false;return false}this.getInitParams=function(){var c="";for(key in a.params){if(a.params.hasOwnProperty(key)){c+=key+"="+a.params[key]+","}}return c},this.render=function(){var c="";if(!a.options.renderOwnUi){c+='<div id="controlsContainer_'+a.type+'" class="uuControlsContainer"><a class="uuButton uuClearButton" href="#" id="clearButton_'+a.type+'" onclick="javascript: universalUploader.clearList();"><span><span><img src="'+universalUploader.getIcon("clear")+'"/>'+universalUploader.getTranslatedString("button_clear")+'</span></span></a><a id="browseButton_'+a.type+'" class="uuButton" href="#"><span><span><img src="'+universalUploader.getIcon("add")+'"/>'+universalUploader.getTranslatedString("button_browse")+'</span></span></a>&nbsp;<a class="uuButton" href="#" id="uploadButton_'+a.type+'" onclick="javascript: universalUploader.uploadButtonHandler();"><span><span><img src="'+universalUploader.getIcon("upload")+'"/>'+universalUploader.getTranslatedString("button_upload")+"</span></span></a></div>"}if(!a.options.renderOwnUi){c+='<div id="'+a.type+'_fileList" class="fileList"></div>'}return c};this.isProgressVisible=function(){return !a.options.renderOwnUi};this.afterRender=function(){if(!a.inited){a.inited=true;universalUploader.setButtonState(a.type,"browseButton_","add",false);var h=document.getElementById(a.type+"_content");var f=h.offsetWidth-20,c=h.offsetHeight-20;var d=document.createElement("div");d.id="silverlightHolder_"+a.type;if(!a.options.renderOwnUi){d.style.position="absolute";d.style.top="0px";d.style.zIndex="99999"}try{d.style.width=f+"px";d.style.height=c+"px"}catch(g){}if(document.getElementById(a.type+"_content")){document.getElementById(a.type+"_content").appendChild(d)}d.innerHTML='<object id="ultimateUploader" data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%" ><param name="source" value="'+a.options.xapUrl+'" /><param name="windowless" value="'+(!a.options.renderOwnUi?"true":"false")+'"/><param name="minRuntimeVersion" value="4.0.50826.0" />'+(!a.options.renderOwnUi?'<param name="background" value="Transparent"/>':"")+'<param name="enablehtmlaccess" value="true"/><param name="autoUpgrade" value="true" /><param name="initParams" value="'+a.getInitParams()+'" /></object>'}};this.upload=function(){if(b.postFields){this.params.CustomPostFields="";for(key in b.postFields){if(b.postFields.hasOwnProperty(key)){this.params.CustomPostFields+=key+";"+b.postFields[key]+"|"}}uploadController.CustomPostFields=this.params.CustomPostFields}if(a.uploadController){this.stopped=false;uploadController.StartUpload()}};this.stop=function(){if(!a.stopped){if(a.uploadController){uploadController.CancelUpload()}a.stopped=true}};this.convertFile=function(d){var c=new universalUploader.File(d.Id,d.FileName,d.FileLength);c.status=d.Status;switch(d.Status){case 0:c.status=0;break;case 1:c.status=1;break;case 2:c.status=0;break;case 3:c.status=2;break;case 4:c.status=4;break;case 5:c.status=5;break}c.bytesLoaded=d.UploadPercent/100*d.FileLength;return c};this.getFiles=function(){return a._files};this.clearList=function(){if(a.uploadController){uploadController.RemoveAll()}};this.removeFile=function(c){if(a.uploadController){uploadController.RemoveFile(c)}};this._removeFile=function(c,d){universalUploader.onRemoveFile(a.type,c,d);if(a._files[c]){a._files.splice(a._files.indexOf(a._files[c]),1);a._files[c]=null;delete a._files[c]}}},onFileUploadStart:function(a){universalUploader.onFileUploadStart(this.type,a.Id)},onFileUploadResume:function(a){universalUploader.onFileUploadStart(this.type,a.Id)},onFileUploadProgress:function(a){universalUploader.onFileUploadProgress(this.type,a.Id,a.BytesUploaded)},onFileUploadCancel:function(a){this.stopped=true;universalUploader.onFileUploadStop(this.type,a.Id)},onUploadCancel:function(){this.stopped=true},onError:function(a){universalUploader.onFileUploadError(this.type,a.Id,"",a.ErrorMessage)},onUploadStart:function(){this.stopped=false;universalUploader.onUploadStart(this.type)},onUploadComplete:function(){universalUploader.onUploadComplete(this.type)},onFileUploadComplete:function(a){var b=a.ServerResponse;universalUploader.onFileUploadComplete(this.type,a.Id,b)},onRemoveFiles:function(c){var b=c.Files;for(var a=0;a<b.length;a++){this._removeFile(b[a].Id)}},onClearList:function(b){universalUploader.onClearList(this.type);for(var a=this._files.length-1;a>=0;a--){this._removeFile(this._files[a].id,true)}},onAddFiles:function(a){var j=a.Files;var h=[],c=null,d=0,g=[0,0,0,0,0,0,0,0,0,0,0,0],f=-1,b=0;for(var e=0;e<j.length;e++){var c=j[e];if(c.FileName!=""){c=this.convertFile(j[e]);f=universalUploader.isValidFile(c,h,d);if(f<0){h.push(c);d+=c.size}else{g[f]++;b++}}}if(b>0){universalUploader.displayResultOfAdd(g)}for(var e=0;e<h.length;e++){this._files[h[e].id]=h[e];this._files.push(h[e])}if(h.length>0){universalUploader.onAddFiles(this.type,h)}},onInit:function(){this.inited=true;this.uploadController=document.getElementById("ultimateUploader").Content.JSAPI;universalUploader.setButtonState(this.type,"browseButton_","add",true);var b=document.getElementById("silverlightHolder_"+this.type);var e=document.getElementById("browseButton_"+this.type);if(b!=null&&e!=null){if(!b.style.position||b.style.position!="absolute"){b.style.position="absolute"}b.style.width=e.offsetWidth+"px";b.style.height=e.offsetHeight+"px";var d=0;var c=0;var a=e;while(a&&a.tagName!="BODY"&&b.offsetParent!=a&&a.nodeType){d+=a.offsetTop||0;c+=a.offsetLeft||0;a=a.offsetParent}a=e.parentNode;while(a&&a.tagName!="BODY"&&b.offsetParent!=a&&a.nodeType){c-=a.scrollLeft||0;d-=a.scrollTop||0;a=a.parentNode}b.style.top=d+"px";b.style.left=c+"px";universalUploader.positionFormUnderButton(e,null,document.getElementById("ultimateUploader"))}uploadController=document.getElementById("ultimateUploader").Content.JSAPI}};universalUploader.Html4={type:"classic",available:true,stopped:false,ids:[],init:function(b){var a=this;a.currentState=universalUploader.FILE_READY;this.options=b;this.progressInfo=new universalUploader.ProgressInfo();this.id="html4_uploadForm";this.url=b.url;this._files=[];this.postFields=b.postFields?b.postFields:{};this.render=function(c){var e=universalUploader.getUid();a.lastId=e;var d='<div id="controlsContainer_'+a.type+'" class="uuControlsContainer"><iframe id="hidden_iframe" name="hidden_iframe" src="#" style="width:0;height:0;border:0px solid #fff;display:none"></iframe><a class="uuButton uuClearButton" href="#" id="clearButton_'+a.type+'" onclick="javascript: universalUploader.clearList();"><span><span><img src="'+universalUploader.getIcon("clear")+'"/>'+universalUploader.getTranslatedString("button_clear")+'</span></span></a><a id="browseButton_'+a.type+'" class="uuButton" href="#"><span><span><img src="'+universalUploader.getIcon("add")+'"/>'+universalUploader.getTranslatedString("button_browse")+'</span></span></a>&nbsp;<a class="uuButton" href="#" id="uploadButton_'+a.type+'" onclick="javascript: universalUploader.uploadButtonHandler();"><span><span><img src="'+universalUploader.getIcon("upload")+'"/>'+universalUploader.getTranslatedString("button_upload")+'</span></span></a><form id="form_'+e+'" name="form_'+e+'" action="'+this.url+'" method="post" encoding="multipart/form-data" enctype="multipart/form-data" target="hidden_iframe" ><input id="file_'+e+'" name="file_'+e+'" class="uuFileInput" type="file" onchange="javascript: universalUploader.Html4.addFile(this);"></form></div>';d+='<div id="'+a.type+'_fileList" class="fileList"></div>';return d};this.afterRender=function(){var d=document.getElementById("browseButton_"+a.type);var e=document.getElementById("form_"+a.lastId);var c=document.getElementById("file_"+a.lastId);universalUploader.positionFormUnderButton(d,e,c)};this.addFile=function(d){fileInput=this;addedfiles=[];if(d&&d.type=="file"){fileInput=d}else{if(d&&d.srcElement){fileInput=d.srcElement}}var g=fileInput.id.substring(5);var e=new universalUploader.File(g,fileInput.value,-1);var k=[0,0,0,0,0,0,0,0,0,0,0,0];var h=universalUploader.isValidFile(e,addedfiles,0);if(h>=0){k[h]++;universalUploader.displayResultOfAdd(k)}else{fileInput.style.display="none";document.getElementById("form_"+g).style.display="none";var j=universalUploader.Html4;var m=document.getElementById(j.type+"_content");universalUploader.removeEventListener("change",fileInput,j.addFile);fileInput.removeAttribute("onchange");if(m){var c=universalUploader.getUid();fForm=document.createElement("form");fForm.setAttribute("id","form_"+c);fForm.setAttribute("name","form_"+c);fForm.setAttribute("enctype","multipart/form-data");fForm.setAttribute("encoding","multipart/form-data");fForm.setAttribute("method","post");fForm.setAttribute("action",j.url);fForm.setAttribute("target","hidden_iframe");fileInput=document.createElement("input");fileInput.setAttribute("id","file_"+c);fileInput.setAttribute("name",j.options.postFields_file);fileInput.setAttribute("type","file");fileInput.className="uuFileInput";universalUploader.addEventListener("change",fileInput,j.addFile);fForm.appendChild(fileInput);document.getElementById("form_"+g).parentNode.insertBefore(fForm,document.getElementById("form_"+g).nextSibling);j.ids.push(g);addedfiles.push(e);var l=document.getElementById("browseButton_"+j.type);l.onClick=null;universalUploader.positionFormUnderButton(l,fForm,fileInput)}for(var f=0;f<addedfiles.length;f++){j._files[addedfiles[f].id]=addedfiles[f];j._files.push(addedfiles[f])}if(addedfiles.length>0){universalUploader.onAddFiles(j.type,addedfiles)}}};this.getFiles=function(){return a._files};this.clearList=function(){universalUploader.onClearList(a.type);for(var c=a._files.length-1;c>=0;c--){a.removeFile(a._files[c].id,true)}};this.removeFile=function(c,e){universalUploader.onRemoveFile(a.type,c,e);if(a.ids.indexOf(c)>=0){a.ids.splice(a.ids.indexOf(c),1)}var d=document.getElementById("file_"+c);var f=document.getElementById("form_"+c);if(d){d.parentNode.removeChild(d)}if(f){f.parentNode.removeChild(f)}if(a._files[c]){a._files.splice(a._files.indexOf(a._files[c]),1);a._files[c]=null;delete a._files[c]}};this.upload=function(){a.stopped=false;universalUploader.onUploadStart(a.type);a.uploadQueue=this.ids.slice();a.uploadNext()};this.stop=function(){if(!a.stopped){if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){window.frames.hidden_iframe.window.document.execCommand("Stop")}else{window.frames.hidden_iframe.window.stop()}a.stopped=true;if(a._files.length>0){universalUploader.onFileUploadStop(a.type,a.currentId)}}};this.appendToUploadQueue=function(c){for(var d=c.length-1;d>=0;d--){a.uploadQueue.push(c[d].id)}};this.uploadNext=function(){if(!a.stopped){a.currentId=a.uploadQueue.shift();var c=document.getElementById("file_"+a.currentId);if(a.currentId&&c&&c.value&&a._files[a.currentId]&&a._files[a.currentId].status!=universalUploader.FILE_COMPLETE){a.doFileUpload(a.currentId)}else{if(a.uploadQueue.length>0){a.uploadNext()}else{universalUploader.onUploadComplete(a.type)}}}};this.doFileUpload=function(g){var f=a.currentId,e=document.getElementById("hidden_iframe"),d=document.getElementById("form_"+f);e.src=window.ActiveXObject?'javascript:""':"about:blank";a.postFields[a.options.postFields_fileId]=f;a.postFields[a.options.postFields_fileSize]=a._files[f].size;a.postFields[a.options.postFields_filesCount]=a._files.length;for(key in a.postFields){if(a.postFields.hasOwnProperty(key)){postField=document.createElement("input");postField.setAttribute("id",key+g);postField.setAttribute("name",key);postField.setAttribute("value",a.postFields[key]);postField.setAttribute("type","hidden");d.appendChild(postField)}}if(window.ActiveXObject){document.frames[e.id].name=e.id}function c(){var h=this,m="",l,k;try{l=e.contentWindow.document||e.contentDocument||WINDOW.frames[g].document;if(l){if(l.body){if(/textarea/i.test((k=l.body.firstChild||{}).tagName)){m=k.value}else{m=l.body.innerHTML}}else{m=l.documentElement.innerText||l.documentElement.textContent}}a.fileComplete(f,m)}catch(j){a.fileError(g,j)}universalUploader.removeEventListener("load",e,c)}if(universalUploader.onFileUploadStart(a.type,a.currentId)===false){return}e.onLoad=null;universalUploader.addEventListener("load",e,c);d.submit()};this.fileComplete=function(d,c){universalUploader.onFileUploadComplete(a.type,a.currentId,c);a.uploadNext()};this.fileError=function(d,c){universalUploader.onFileUploadError(a.type,a.currentId,"",c.message)}}};universalUploader.Html5={type:"drag-and-drop",available:true,formid:"",init:function(b){var a=this;a.currentState=universalUploader.FILE_READY;this.options=b;this.progressInfo=new universalUploader.ProgressInfo();this.id=universalUploader.getUid();this.url=b.url;this.postFields=b.postFields;this.timeout=b.timeout?b.timeout:3000;this.files=[];this._files=[];this.ids=[];this.currentId=null;this.dndTimeout=null;if(window.XMLHttpRequest){xhr=new XMLHttpRequest();a.available=(xhr.sendAsBinary||xhr.upload)?true:false;try{var c=new FormData()}catch(d){a.available=false}}else{a.available=false}if(!a.available){return false}this.render=function(e){var f='<div id="controlsContainer_'+a.type+'" class="uuControlsContainer"><a class="uuButton uuClearButton" href="#" id="clearButton_'+a.type+'" onclick="javascript: universalUploader.clearList();"><span><span><img src="'+universalUploader.getIcon("clear")+'"/>'+universalUploader.getTranslatedString("button_clear")+'</span></span></a><a id="browseButton_'+a.type+'" class="uuButton" href="#"><span><span><img src="'+universalUploader.getIcon("add")+'"/>'+universalUploader.getTranslatedString("button_browse")+'</span></span></a>&nbsp;<a class="uuButton" href="#" id="uploadButton_'+a.type+'" onclick="javascript: universalUploader.uploadButtonHandler();"><span><span><img src="'+universalUploader.getIcon("upload")+'"/>'+universalUploader.getTranslatedString("button_upload")+'</span></span></a><form id="form_'+a.id+'" name="form_'+a.id+'" action="'+a.url+'" method="post" encoding="multipart/form-data" enctype="multipart/form-data" target="hidden_iframe" ><input id="file_'+a.id+'" name="file_'+a.id+'" type="file" class="uuFileInput" onchange="javascript: universalUploader.Html5.addFiles(this);" multiple="multiple"></form></div>';f+='<div id="drop_target" class="dropTarget"> Drop files here </div>';f+='<div id="'+a.type+'_fileList" class="fileList"></div>';return f};this.afterRender=function(){var e=document.getElementById("drop_target");universalUploader.addEventListener("dragenter",document.body,function(k){var j=document.getElementById(a.type+"_fileList");e=document.getElementById("drop_target");e.style.display="block";e.style.width=j.clientWidth+"px";e.style.height=j.clientHeight+"px";if(a.dndTimeout){clearTimeout(a.dndTimeout)}a.dndTimeout=setTimeout(a.dragend,3000);if(navigator.userAgent.indexOf("Safari")>0){var h=document.getElementById("form_"+a.id);var f=document.getElementById("file_"+a.id);try{h.removeChild(f);universalUploader.addEventListener("change",f,a.dragend)}catch(g){}e.appendChild(f);universalUploader.positionFormUnderButton(e,h,f)}});universalUploader.addEventListener("dragstart",document.body,a.dragstart);universalUploader.addEventListener("dragend",document.body,a.dragend);if(e&&navigator.userAgent.indexOf("Safari")<0){universalUploader.addEventListener("dragover",e,a.dragOver);universalUploader.addEventListener("drop",e,a.drop)}a.placeInputOverBrowseButton()};this.dragstart=function(f){try{if(f.preventDefault){f.preventDefault()}if(f.stopPropagation){f.stopPropagation()}if(window.event){window.event.returnValue=false}if(f.stopEvent){f.stopEvent()}}catch(f){if(debugmode){throw f}}return false};this.dragOver=function(f){try{if(a.dndTimeout){clearTimeout(a.dndTimeout)}a.dndTimeout=setTimeout(a.dragend,3000);if(f.preventDefault){f.preventDefault()}if(f.stopPropagation){f.stopPropagation()}if(window.event){window.event.returnValue=false}if(f.stopEvent){f.stopEvent()}}catch(f){if(debugmode){throw f}}return false};this.dragend=function(g){try{a.placeInputOverBrowseButton();if(a.dndTimeout){clearTimeout(a.dndTimeout)}var h=document.getElementById("drop_target");h.style.display="none";var f=document.getElementById("file_"+a.id);universalUploader.removeEventListener("change",f,a.dragend)}catch(g){throw g}};this.drop=function(f){try{a.placeInputOverBrowseButton();var g=document.getElementById("drop_target");g.style.display="none";if(f.preventDefault){f.preventDefault()}if(f.stopPropagation){f.stopPropagation()}if(window.event){window.event.returnValue=false}if(f.stopEvent){f.stopEvent()}if(!f.dataTransfer||!f.dataTransfer.files||f.dataTransfer.files.length<1){return}a._addFiles(f.dataTransfer.files)}catch(f){throw f}};this.placeInputOverBrowseButton=function(){var k=document.getElementById("drop_target");var e=document.getElementById("controlsContainer_"+a.type);var g=document.getElementById("browseButton_"+a.type);var j=document.getElementById("form_"+a.id);var f=document.getElementById("file_"+a.id);try{k.removeChild(f)}catch(h){}j.appendChild(f);universalUploader.positionFormUnderButton(g,j,f)};this.addFiles=function(e){this._addFiles(e.files)};this._addFiles=function(n){var m=[],f=null,g=0,l=[0,0,0,0,0,0,0,0,0,0,0,0],k=-1,e=0;for(var j=0;j<n.length;j++){var f=n[j];if(f.name!=""){var h=universalUploader.getUid();a.files[h]=f;a.files.push(f);a.ids.push(h);f=new universalUploader.File(h,f.name||f.fileName,f.size||f.fileSize);k=universalUploader.isValidFile(f,m,g);if(k<0){m.push(f);g+=f.size}else{l[k]++;e++}}}if(e>0){universalUploader.displayResultOfAdd(l)}for(var j=0;j<m.length;j++){a._files[m[j].id]=m[j];a._files.push(m[j])}if(m.length>0){universalUploader.onAddFiles(a.type,m)}};this.getFiles=function(){return a._files};this.clearList=function(){universalUploader.onClearList(a.type);for(var e=a._files.length-1;e>=0;e--){a.removeFile(a._files[e].id,true)}};this.removeFile=function(e,f){universalUploader.onRemoveFile(a.type,e,f);if(a.ids.indexOf(e)>=0){a.ids.splice(a.ids.indexOf(e),1)}if(a.files[e]){a.files.splice(a.files.indexOf(a.files[e]),1);a.files[e]=null;delete a.files[e]}if(a._files[e]){a._files.splice(a._files.indexOf(a._files[e]),1);a._files[e]=null;delete a._files[e]}};this.stop=function(){if(!a.stopped){a.stopped=true;if(a.xhr&&a.xhr.readyState!=4){a.xhr.abort()}}};this.upload=function(){universalUploader.onUploadStart(a.type);a.stopped=false;a.uploadQueue=a.ids.slice();a.uploadNext()};this.appendToUploadQueue=function(e){for(var f=e.length-1;f>=0;f--){a.uploadQueue.push(e[f].id)}};this.uploadNext=function(){a.currentId=a.uploadQueue.shift();if(a.currentId&&!a.stopped&&a._files[a.currentId]&&a._files[a.currentId].status!=universalUploader.FILE_COMPLETE){a.doFileUpload(a.currentId)}else{if(a.uploadQueue.length>0){a.uploadNext()}else{universalUploader.onUploadComplete(a.type)}}};this.doFileUpload=function(h){var g=a.files[h];xhr=new XMLHttpRequest();a.xhr=xhr;xhr.upload.addEventListener("loadstart",function(j){universalUploader.onFileUploadStart(a.type,a.currentId)},false);xhr.upload.addEventListener("progress",function(k){if(k.lengthComputable&&k.total>0){var j=a._files[a.currentId];universalUploader.onFileUploadProgress(a.type,a.currentId,k.loaded>j.size?j.size:k.loaded)}},false);xhr.upload.addEventListener("error",function(j){if(a.currentId){universalUploader.onFileUploadError(a.type,a.currentId,xhr.status.toString(),xhr.statusText)}a.uploadNext()},false);xhr.upload.addEventListener("abort",function(j){universalUploader.onFileUploadStop(a.type,a.currentId)},false);xhr.onreadystatechange=function(){if(xhr.readyState==4&&!a.stopped){var j=xhr.responseText;if(xhr.status>=200&&xhr.status<300){universalUploader.onFileUploadComplete(a.type,a.currentId,j)}else{universalUploader.onFileUploadError(a.type,a.currentId,xhr.status.toString(),j)}a.uploadNext()}};xhr.timeout=a.timeout;xhr.open("POST",a.url,true);try{var f=new FormData();f.append(a.options.postFields_file,g);a.postFields[a.options.postFields_fileId]=g.id;a.postFields[a.options.postFields_fileSize]=g.size;a.postFields[a.options.postFields_filesCount]=a._files.length;for(key in a.postFields){if(a.postFields.hasOwnProperty(key)){f.append(key,a.postFields[key])}}}catch(e){}xhr.send(f)}}};String.prototype.trim=function trim12(){var c=this.replace(/^\s\s*/,""),a=/\s/,b=c.length;while(a.test(c.charAt(-b))){}return c.slice(0,b+1)};if(Array.indexOf="undefined"||!Array.indexOf){Array.prototype.indexOf=function(b){for(var a=0;a<this.length;a++){if(this[a]==b){return a}}return -1}}swfobject=function(){var aq="undefined",aD="object",ab="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",aE="application/x-shockwave-flash",ac="SWFObjectExprInst",ax="onreadystatechange",af=window,aL=document,aB=navigator,aa=false,Z=[aN],aG=[],ag=[],al=[],aJ,ad,ap,at,ak=false,aU=false,aH,an,aI=true,ah=function(){var a=typeof aL.getElementById!=aq&&typeof aL.getElementsByTagName!=aq&&typeof aL.createElement!=aq,e=aB.userAgent.toLowerCase(),c=aB.platform.toLowerCase(),h=c?/win/.test(c):/win/.test(e),k=c?/mac/.test(c):/mac/.test(e),g=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,d=!+"\v1",f=[0,0,0],l=null;if(typeof aB.plugins!=aq&&typeof aB.plugins[ab]==aD){l=aB.plugins[ab].description;if(l&&!(typeof aB.mimeTypes!=aq&&aB.mimeTypes[aE]&&!aB.mimeTypes[aE].enabledPlugin)){aa=true;d=false;l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1");f[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10);f[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10);f[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof af.ActiveXObject!=aq){try{var j=new ActiveXObject(X);if(j){l=j.GetVariable("$version");if(l){d=true;l=l.split(" ")[1].split(",");f=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)]}}}catch(b){}}}return{w3:a,pv:f,wk:g,ie:d,win:h,mac:k}}(),aK=function(){if(!ah.w3){return}if((typeof aL.readyState!=aq&&aL.readyState=="complete")||(typeof aL.readyState==aq&&(aL.getElementsByTagName("body")[0]||aL.body))){aP()}if(!ak){if(typeof aL.addEventListener!=aq){aL.addEventListener("DOMContentLoaded",aP,false)}if(ah.ie&&ah.win){aL.attachEvent(ax,function(){if(aL.readyState=="complete"){aL.detachEvent(ax,arguments.callee);aP()}});if(af==top){(function(){if(ak){return}try{aL.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}aP()})()}}if(ah.wk){(function(){if(ak){return}if(!/loaded|complete/.test(aL.readyState)){setTimeout(arguments.callee,0);return}aP()})()}aC(aP)}}();function aP(){if(ak){return}try{var b=aL.getElementsByTagName("body")[0].appendChild(ar("span"));b.parentNode.removeChild(b)}catch(a){return}ak=true;var d=Z.length;for(var c=0;c<d;c++){Z[c]()}}function aj(a){if(ak){a()}else{Z[Z.length]=a}}function aC(a){if(typeof af.addEventListener!=aq){af.addEventListener("load",a,false)}else{if(typeof aL.addEventListener!=aq){aL.addEventListener("load",a,false)}else{if(typeof af.attachEvent!=aq){aM(af,"onload",a)}else{if(typeof af.onload=="function"){var b=af.onload;af.onload=function(){b();a()}}else{af.onload=a}}}}}function aN(){if(aa){Y()}else{am()}}function Y(){var d=aL.getElementsByTagName("body")[0];var b=ar(aD);b.setAttribute("type",aE);var a=d.appendChild(b);if(a){var c=0;(function(){if(typeof a.GetVariable!=aq){var e=a.GetVariable("$version");if(e){e=e.split(" ")[1].split(",");ah.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)]}}else{if(c<10){c++;setTimeout(arguments.callee,10);return}}d.removeChild(b);a=null;am()})()}else{am()}}function am(){var g=aG.length;if(g>0){for(var h=0;h<g;h++){var c=aG[h].id;var m=aG[h].callbackFn;var a={success:false,id:c};if(ah.pv[0]>0){var j=aS(c);if(j){if(ao(aG[h].swfVersion)&&!(ah.wk&&ah.wk<312)){ay(c,true);if(m){a.success=true;a.ref=av(c);m(a)}}else{if(aG[h].expressInstall&&au()){var e={};e.data=aG[h].expressInstall;e.width=j.getAttribute("width")||"0";e.height=j.getAttribute("height")||"0";if(j.getAttribute("class")){e.styleclass=j.getAttribute("class")}if(j.getAttribute("align")){e.align=j.getAttribute("align")}var f={};var d=j.getElementsByTagName("param");var l=d.length;for(var k=0;k<l;k++){if(d[k].getAttribute("name").toLowerCase()!="movie"){f[d[k].getAttribute("name")]=d[k].getAttribute("value")}}ae(e,f,c,m)}else{aF(j);if(m){m(a)}}}}}else{ay(c,true);if(m){var b=av(c);if(b&&typeof b.SetVariable!=aq){a.success=true;a.ref=b}m(a)}}}}}function av(b){var d=null;var c=aS(b);if(c&&c.nodeName=="OBJECT"){if(typeof c.SetVariable!=aq){d=c}else{var a=c.getElementsByTagName(aD)[0];if(a){d=a}}}return d}function au(){return !aU&&ao("6.0.65")&&(ah.win||ah.mac)&&!(ah.wk&&ah.wk<312)}function ae(f,d,h,e){aU=true;ap=e||null;at={success:false,id:h};var a=aS(h);if(a){if(a.nodeName=="OBJECT"){aJ=aO(a);ad=null}else{aJ=a;ad=h}f.id=ac;if(typeof f.width==aq||(!/%$/.test(f.width)&&parseInt(f.width,10)<310)){f.width="310"}if(typeof f.height==aq||(!/%$/.test(f.height)&&parseInt(f.height,10)<137)){f.height="137"}aL.title=aL.title.slice(0,47)+" - Flash Player Installation";var b=ah.ie&&ah.win?"ActiveX":"PlugIn",c="MMredirectURL="+af.location.toString().replace(/&/g,"%26")+"&MMplayerType="+b+"&MMdoctitle="+aL.title;if(typeof d.flashvars!=aq){d.flashvars+="&"+c}else{d.flashvars=c}if(ah.ie&&ah.win&&a.readyState!=4){var g=ar("div");h+="SWFObjectNew";g.setAttribute("id",h);a.parentNode.insertBefore(g,a);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}aA(f,d,h)}}function aF(a){if(ah.ie&&ah.win&&a.readyState!=4){var b=ar("div");a.parentNode.insertBefore(b,a);b.parentNode.replaceChild(aO(a),b);a.style.display="none";(function(){if(a.readyState==4){a.parentNode.removeChild(a)}else{setTimeout(arguments.callee,10)}})()}else{a.parentNode.replaceChild(aO(a),a)}}function aO(b){var d=ar("div");if(ah.win&&ah.ie){d.innerHTML=b.innerHTML}else{var e=b.getElementsByTagName(aD)[0];if(e){var a=e.childNodes;if(a){var f=a.length;for(var c=0;c<f;c++){if(!(a[c].nodeType==1&&a[c].nodeName=="PARAM")&&!(a[c].nodeType==8)){d.appendChild(a[c].cloneNode(true))}}}}}return d}function aA(e,g,c){var d,a=aS(c);if(ah.wk&&ah.wk<312){return d}if(a){if(typeof e.id==aq){e.id=c}if(ah.ie&&ah.win){var f="";for(var j in e){if(e[j]!=Object.prototype[j]){if(j.toLowerCase()=="data"){g.movie=e[j]}else{if(j.toLowerCase()=="styleclass"){f+=' class="'+e[j]+'"'}else{if(j.toLowerCase()!="classid"){f+=" "+j+'="'+e[j]+'"'}}}}}var h="";for(var k in g){if(g[k]!=Object.prototype[k]){h+='<param name="'+k+'" value="'+g[k]+'" />'}}a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>";ag[ag.length]=e.id;d=aS(e.id)}else{var b=ar(aD);b.setAttribute("type",aE);for(var l in e){if(e[l]!=Object.prototype[l]){if(l.toLowerCase()=="styleclass"){b.setAttribute("class",e[l])}else{if(l.toLowerCase()!="classid"){b.setAttribute(l,e[l])}}}}for(var m in g){if(g[m]!=Object.prototype[m]&&m.toLowerCase()!="movie"){aQ(b,m,g[m])}}a.parentNode.replaceChild(b,a);d=b}}return d}function aQ(b,d,c){var a=ar("param");a.setAttribute("name",d);a.setAttribute("value",c);b.appendChild(a)}function aw(a){var b=aS(a);if(b&&b.nodeName=="OBJECT"){if(ah.ie&&ah.win){b.style.display="none";(function(){if(b.readyState==4){aT(a)}else{setTimeout(arguments.callee,10)}})()}else{b.parentNode.removeChild(b)}}}function aT(a){var b=aS(a);if(b){for(var c in b){if(typeof b[c]=="function"){b[c]=null}}b.parentNode.removeChild(b)}}function aS(a){var c=null;try{c=aL.getElementById(a)}catch(b){}return c}function ar(a){return aL.createElement(a)}function aM(a,c,b){a.attachEvent(c,b);al[al.length]=[a,c,b]}function ao(a){var b=ah.pv,c=a.split(".");c[0]=parseInt(c[0],10);c[1]=parseInt(c[1],10)||0;c[2]=parseInt(c[2],10)||0;return(b[0]>c[0]||(b[0]==c[0]&&b[1]>c[1])||(b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]))?true:false}function az(b,f,a,c){if(ah.ie&&ah.mac){return}var e=aL.getElementsByTagName("head")[0];if(!e){return}var g=(a&&typeof a=="string")?a:"screen";if(c){aH=null;an=null}if(!aH||an!=g){var d=ar("style");d.setAttribute("type","text/css");d.setAttribute("media",g);aH=e.appendChild(d);if(ah.ie&&ah.win&&typeof aL.styleSheets!=aq&&aL.styleSheets.length>0){aH=aL.styleSheets[aL.styleSheets.length-1]}an=g}if(ah.ie&&ah.win){if(aH&&typeof aH.addRule==aD){aH.addRule(b,f)}}else{if(aH&&typeof aL.createTextNode!=aq){aH.appendChild(aL.createTextNode(b+" {"+f+"}"))}}}function ay(a,c){if(!aI){return}var b=c?"visible":"hidden";if(ak&&aS(a)){aS(a).style.visibility=b}else{az("#"+a,"visibility:"+b)}}function ai(b){var a=/[\\\"<>\.;]/;var c=a.exec(b)!=null;return c&&typeof encodeURIComponent!=aq?encodeURIComponent(b):b}var aR=function(){if(ah.ie&&ah.win){window.attachEvent("onunload",function(){var a=al.length;for(var b=0;b<a;b++){al[b][0].detachEvent(al[b][1],al[b][2])}var d=ag.length;for(var c=0;c<d;c++){aw(ag[c])}for(var e in ah){ah[e]=null}ah=null;for(var f in swfobject){swfobject[f]=null}swfobject=null})}}();return{registerObject:function(a,e,c,b){if(ah.w3&&a&&e){var d={};d.id=a;d.swfVersion=e;d.expressInstall=c;d.callbackFn=b;aG[aG.length]=d;ay(a,false)}else{if(b){b({success:false,id:a})}}},getObjectById:function(a){if(ah.w3){return av(a)}},embedSWF:function(l,e,h,f,c,a,b,j,g,k){var d={success:false,id:e};if(ah.w3&&!(ah.wk&&ah.wk<312)&&l&&e&&h&&f&&c){ay(e,false);aj(function(){h+="";f+="";var r={};if(g&&typeof g===aD){for(var p in g){r[p]=g[p]}}r.data=l;r.width=h;r.height=f;var o={};if(j&&typeof j===aD){for(var q in j){o[q]=j[q]}}if(b&&typeof b===aD){for(var m in b){if(typeof o.flashvars!=aq){o.flashvars+="&"+m+"="+b[m]}else{o.flashvars=m+"="+b[m]}}}if(ao(c)){var n=aA(r,o,e);if(r.id==e){ay(e,true)}d.success=true;d.ref=n}else{if(a&&au()){r.data=a;ae(r,o,e,k);return}else{ay(e,true)}}if(k){k(d)}})}else{if(k){k(d)}}},switchOffAutoHideShow:function(){aI=false},ua:ah,getFlashPlayerVersion:function(){return{major:ah.pv[0],minor:ah.pv[1],release:ah.pv[2]}},hasFlashPlayerVersion:ao,createSWF:function(a,b,c){if(ah.w3){return aA(a,b,c)}else{return undefined}},showExpressInstall:function(b,a,d,c){if(ah.w3&&au()){ae(b,a,d,c)}},removeSWF:function(a){if(ah.w3){aw(a)}},createCSS:function(b,a,c,d){if(ah.w3){az(b,a,c,d)}},addDomLoadEvent:aj,addLoadEvent:aC,getQueryParamValue:function(b){var a=aL.location.search||aL.location.hash;if(a){if(/\?/.test(a)){a=a.split("?")[1]}if(b==null){return ai(a)}var c=a.split("&");for(var d=0;d<c.length;d++){if(c[d].substring(0,c[d].indexOf("="))==b){return ai(c[d].substring((c[d].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(aU){var a=aS(ac);if(a&&aJ){a.parentNode.replaceChild(aJ,a);if(ad){ay(ad,true);if(ah.ie&&ah.win){aJ.style.display="block"}}if(ap){ap(at)}}aU=false}}}}();